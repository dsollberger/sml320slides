{
  "hash": "6d794c18c7708eef0c8ca526a1306882",
  "result": {
    "markdown": "---\ntitle: \"16: Naive Bayes Classification\"\nauthor: \"Derek Sollberger\"\ndate: \"2024-04-04\"\nexecute:\n  cache: true\n# format:\n#   revealjs:\n#     scrollable: true\nformat:\n  html:\n    toc: true\n---\n\n\n\\newcommand{\\ds}{\\displaystyle}\n\n# Naive Bayes Classification\n\n:::: {.columns}\n\n::: {.column width=\"45%\"}\n**Goal:** Use Bayesian approaches to classification tasks\n\n**Objectives**:\n\n* explore the pros and cons of naive Bayes classification\n* generalize classification tasks for more than two categories\n\n*Bayes Rules!* Exercise 13.14\n\n![meme](grad_student_meme.png)\n\n\n::: {.cell hash='16_naive_bayes_cache/html/unnamed-chunk-1_9aabd22dd4160c5ddad71556c4ca08ae'}\n\n```{.r .cell-code}\nlibrary(\"bayesrules\")\nlibrary(\"e1071\") #for the naiveBayes() function\nlibrary(\"ggtext\")\nlibrary(\"janitor\")\nlibrary(\"tidyverse\")\n\nknitr::opts_chunk$set(echo = TRUE)\n```\n:::\n\n\n\n:::\n\n::: {.column width=\"10%\"}\n\n:::\n\n::: {.column width=\"45%\"}\n\n::: {.cell hash='16_naive_bayes_cache/html/unnamed-chunk-2_ca176e9c22affabd3077ae4440f44f5f'}\n\n```{.r .cell-code}\ndata(pulse_of_the_nation)\npulse_df <- pulse_of_the_nation |>\n  filter(education %in% c(\"Graduate degree\", \"College degree\", \"High school\"))\n\npulse_df$education <- factor(pulse_df$education,\n                             levels = c(\"Graduate degree\",\n                                        \"College degree\",\n                                        \"High school\"))\npulse_df$robots <- factor(pulse_df$robots,\n                          levels = c(\"Likely\", \"Unlikely\"))\npulse_df$ghosts <- factor(pulse_df$ghosts,\n                          levels = c(\"Yes\", \"No\"))\n\n# https://www.color-hex.com/color-palette/46386\nghostbusters_green <- \"#23B63C\"\nghostbusters_red   <- \"#EA0000\"\nghostbusters_gray  <- \"#AB9F8F\"\n```\n:::\n\n:::\n\n::::\n\n# Data\n\n:::: {.columns}\n\n::: {.column width=\"45%\"}\n* source: [Pulse of the Nation](https://thepulseofthenation.com/#intro) survey by Cards Against Humanity\n* Poll 1: September 2017\n\n* 707 observations\n* 15 variables\n\n:::\n\n::: {.column width=\"10%\"}\n\n:::\n\n::: {.column width=\"45%\"}\n![Pulse of the Nation](prulse_of_the_nation.png)\n:::\n\n::::\n\n## Exploratory Data Analyses\n\n::::: {.panel-tabset}\n\n## Income\n\n\n::: {.cell hash='16_naive_bayes_cache/html/unnamed-chunk-3_7c7e5a9dba0bb569ce661c7c327dae74'}\n::: {.cell-output-display}\n![](16_naive_bayes_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n::: {.cell hash='16_naive_bayes_cache/html/unnamed-chunk-4_2f3897358778d1a3ba6b79bbe40959b0'}\n\n```{.r .cell-code}\npulse_df |>\n  ggplot(aes(x = income)) +\n  geom_density(fill = \"green\") +\n  labs(title = \"Pulse of the Nation\",\n       subtitle = \"Income of participants\",\n       caption = \"SML 320\",\n       x = \"income (thousands of dollars)\",\n       y = \"\") +\n  theme_minimal() +\n  theme(axis.text.y = element_blank(),\n        axis.ticks.y = element_blank())\n```\n:::\n\n\n## Age\n\n\n::: {.cell hash='16_naive_bayes_cache/html/unnamed-chunk-5_f23060436c5eee181555bcbb33c46e50'}\n::: {.cell-output-display}\n![](16_naive_bayes_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n::: {.cell hash='16_naive_bayes_cache/html/unnamed-chunk-6_1e606b9683c78fc9c0047160f131fbae'}\n\n```{.r .cell-code}\npulse_df |>\n  ggplot(aes(x = age)) +\n  geom_density(fill = \"purple\") +\n  labs(title = \"Pulse of the Nation\",\n       subtitle = \"Age of participants\",\n       caption = \"SML 320\",\n       x = \"age\",\n       y = \"\") +\n  theme_minimal() +\n  theme(axis.text.y = element_blank(),\n        axis.ticks.y = element_blank())\n```\n:::\n\n\n## Education\n\n$$Y = \\begin{cases} G, & \\text{Graduate Degree} \\\\ C, & \\text{College Degree} \\\\ H, & \\text{High School} \\end{cases}$$\n\n\n::: {.cell hash='16_naive_bayes_cache/html/unnamed-chunk-7_889e58442569f864b459d3f4dff12e6d'}\n::: {.cell-output-display}\n![](16_naive_bayes_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n::: {.cell hash='16_naive_bayes_cache/html/unnamed-chunk-8_1132d720bc02c7e292b39a300e6fd3ed'}\n\n```{.r .cell-code}\npulse_df |>\n  ggplot(aes(x = education, fill = education)) +\n  geom_bar(stat = \"count\") +\n  labs(title = \"Pulse of the Nation\",\n       subtitle = \"Education attainment of participants\",\n       caption = \"SML 320\",\n       x = \"education\",\n       y = \"count\") +\n  theme_minimal() +\n  theme(legend.position = \"none\")\n```\n:::\n\n\n## Robots\n\n\n::: {.cell hash='16_naive_bayes_cache/html/unnamed-chunk-9_c1f5c78dde8123aba22fc68e571e1d3c'}\n::: {.cell-output-display}\n![](16_naive_bayes_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n::: {.cell hash='16_naive_bayes_cache/html/unnamed-chunk-10_0390c48dab3cfad124f0236e64ec211d'}\n\n```{.r .cell-code}\npulse_df |>\n  ggplot(aes(x = robots, fill = robots)) +\n  geom_bar(stat = \"count\") +\n  labs(title = \"Pulse of the Nation\",\n       subtitle = \"Is it likely that robots would take your jobs within the next decade\",\n       caption = \"September 2017\",\n       x = \"\",\n       y = \"count\") +\n  theme_minimal() +\n  theme(legend.position = \"none\")\n```\n:::\n\n\n## Ghosts\n\n\n::: {.cell hash='16_naive_bayes_cache/html/unnamed-chunk-11_b2979c71aec811dec1f3c832c12a09b7'}\n::: {.cell-output-display}\n![](16_naive_bayes_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n:::\n\n::: {.cell hash='16_naive_bayes_cache/html/unnamed-chunk-12_3fb8cc16add7110a043da2da7ce6b818'}\n\n```{.r .cell-code}\npulse_df |>\n  ggplot(aes(x = ghosts, fill = ghosts)) +\n  geom_bar(stat = \"count\") +\n  labs(title = \"Pulse of the Nation\",\n       subtitle = \"Do you believe in ghosts?\",\n       caption = \"September 2017\",\n       x = \"\",\n       y = \"count\") +\n  theme_minimal() +\n  theme(legend.position = \"none\")\n```\n:::\n\n\n\n:::::\n\n## Variables\n\n:::: {.columns}\n\n::: {.column width=\"40%\"}\n### Response Variable\n\n$Y$: `education`\n\n* *categorical variable*: education attained\n\n### Prediction\n\nWhat degree does a 25-year-old who makes $50,000/year have?\n\n:::\n\n::: {.column width=\"10%\"}\n\n:::\n\n::: {.column width=\"50%\"}\n### Predictor Variables\n\n* $X_{1}$: `ghosts`\n* $X_{2}$: `age`\n* $X_{3}$: `income`\n* $X_{4}$: `robots`\n:::\n\n::::\n\n## Ideas\n\nHere, we have *three* categories, whereas logistic regression is limited to classifying *binary* response variables.\nAs an alternative, **naive Bayes classification**\n\n-   can classify categorical response variables $Y$ with two or more categories\n-   doesn't require much theory beyond Bayes' Rule\n-   it's computationally efficient, i.e., doesn't require MCMC simulation\n\nBut why is it called \"naive\"?\n\n\n# One Categorical Predictor\n\nSuppose that a researcher encounters a participant who believes in ghosts.  Our goal is to help this researcher guess the educational attainment of the participant: high school, college degree, or graduate degree.\n\n::::: {.panel-tabset}\n\n## Plot\n\n\n::: {.cell hash='16_naive_bayes_cache/html/unnamed-chunk-13_000393084620daafbd433f9163d464f9'}\n::: {.cell-output-display}\n![](16_naive_bayes_files/figure-html/unnamed-chunk-13-1.png){width=672}\n:::\n:::\n\n\n## Code\n\n\n::: {.cell hash='16_naive_bayes_cache/html/unnamed-chunk-14_a93e49b809fa56c454857815d00ac670'}\n\n```{.r .cell-code}\npulse_df |>\n  ggplot(aes(x = education, fill = ghosts)) +\n  geom_bar(position = \"fill\") +\n   labs(title = \"<span style = 'color:#AB9F8F'>For which education level is a<br>belief in ghosts most likely?</span>\",\n       subtitle = \"(focus on the <span style = 'color:#23B63C'>belief in ghosts</span> category)\",\n       caption = \"SML 320\",\n       x = \"education\",\n       y = \"proportion\") +\n  scale_fill_manual(values = c(\"#23B63C\", \"#EA0000\")) +\n  theme_minimal() +\n  theme(plot.title = element_markdown(face = \"bold\", size = 24),\n        plot.subtitle = element_markdown(size = 16))\n```\n:::\n\n\n:::::\n\n## Recall: Bayes Rule\n\n$$f(y|x_{1}) = \\frac{\\text{prior}\\cdot\\text{likelihood}}{\\text{normalizing constant}} = \\frac{f(y) \\cdot L(y|x_{1})}{f(x_{1})}$$ where, by the Law of Total Probability,\n\n$$\\begin{array}{rcl}\nf(x_{1}) & = & \\displaystyle\\sum_{\\text{all } y'} f(y')L(y'|x_{1}) \\\\\n~ & = & f(y' = G)L(y' = G|x_{1}) + f(y' = C)L(y' = C|x_{1}) + f(y' = H)L(y' = H|x_{1}) \\\\\n\\end{array}$$\n\nover our three education levels.\n\n## Calculation\n\n\n::: {.cell hash='16_naive_bayes_cache/html/unnamed-chunk-15_24474151b813b193a1b8e46f670f57c5'}\n\n```{.r .cell-code}\npulse_df |>\n  janitor::tabyl(education, ghosts) |>\n  janitor::adorn_totals(c(\"row\", \"col\"))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n       education Yes  No Total\n Graduate degree  58 145   203\n  College degree 112 201   313\n     High school  84 107   191\n           Total 254 453   707\n```\n:::\n:::\n\n\nPrior probabilities:\n\n$$f(y = G) = \\frac{203}{707}, \\quad f(y = C) = \\frac{313}{707}, \\quad f(y = H) = \\frac{191}{707}$$\n\nLikelihoods:\n\n$$\\begin{array}{rcccl}\n  L(y = G | x_{1} = 1) & = & \\frac{58}{203} & \\approx & 0.2857 \\\\\n  L(y = C | x_{1} = 1) & = & \\frac{112}{313} & \\approx & 0.3578 \\\\\n  L(y = H | x_{1} = 1) & = & \\frac{84}{191} & \\approx & 0.4398 \\\\\n\\end{array}$$\nTotal probability:\n\n$$f(x_{1} = 1) = \\frac{203}{707}\\cdot\\frac{58}{203} + \\frac{313}{707}\\cdot\\frac{112}{313} + \\frac{191}{707}\\cdot\\frac{84}{191} = \\frac{97}{270}$$\n\nBayes' Rules:\n\n$$\\begin{array}{rcccccl}\n  f(y = G | x_{1} = 1) & = & \\frac{f(y = G) \\cdot L(y = G | x_{1} = 1)}{f(x_{1} = 1)} = \\frac{\\frac{203}{707}\\cdot\\frac{58}{203}}{\\frac{97}{270}} & \\approx & 0.2283 \\\\\n  f(y = C | x_{1} = 1) & = & \\frac{f(y = C) \\cdot L(y = C | x_{1} = 1)}{f(x_{1} = 1)} = \\frac{\\frac{313}{707}\\cdot\\frac{112}{313}}{\\frac{97}{270}} & \\approx & 0.4409 \\\\\n  f(y = H | x_{1} = 1) & = & \\frac{f(y = H) \\cdot L(y = H | x_{1} = 1)}{f(x_{1} = 1)} = \\frac{\\frac{191}{707}\\cdot\\frac{84}{191}}{\\frac{97}{270}} & \\approx & 0.3307 \\\\\n\\end{array}$$\n\nWhile the likelihoods pointed at the high school level, the survey had more college degree participants, so the posterior distribution balance, so far, assigns the highest probability to the college degree level\n\n\n# One Numerical Predictor\n\n::::: {.panel-tabset}\n\n## Plot\n\n\n::: {.cell hash='16_naive_bayes_cache/html/unnamed-chunk-16_e3d98bd322c33318dd55cad0f7bc4aec'}\n::: {.cell-output-display}\n![](16_naive_bayes_files/figure-html/unnamed-chunk-16-1.png){width=672}\n:::\n:::\n\n\n## Code\n\n\n::: {.cell hash='16_naive_bayes_cache/html/unnamed-chunk-17_c50e6d1dafcb3e2f28cd720b22bc0900'}\n\n```{.r .cell-code}\npulse_df |>\n  ggplot(aes(x = age, fill = education)) +\n  geom_density(alpha = 0.7) + \n  geom_vline(xintercept = 25, linetype = \"dashed\", linewidth = 3) + \n  labs(title = \"<span style = 'color:#EA0000'>For which education level is a<br>25-year-old the most common?</span>\",\n       subtitle = \"one numerical predictor\",\n       caption = \"R4DS Book Club\") +\n  scale_fill_manual(values = c(ghostbusters_green, ghostbusters_red , ghostbusters_gray)) +\n  theme_minimal() +\n  theme(axis.text.y = element_blank(),\n        axis.ticks.y = element_blank(),\n        plot.title = element_markdown(face = \"bold\", size = 24),\n        plot.subtitle = element_markdown(size = 16))\n```\n:::\n\n\n:::::\n\nOur data points to our participant having a college degree\n\n-   we could consider the fact that college degree is the most frequent of these three education levels\n-   difficult to compute likelihood $L(y = C | x_{2} = 25)$\n\n## Naivety\n\nThis is where one \"*naive*\" part of naive Bayes classification comes into play. The naive Bayes method typically assumes that any quantitative predictor, here $X_{2}$, is **continuous** and **conditionally normal**:\n\n$$\\begin{array}{rcl}\n  X_{2} | (Y = G) & \\sim & N(\\mu_{G}, \\sigma_{G}^{2}) \\\\\n  X_{2} | (Y = C) & \\sim & N(\\mu_{C}, \\sigma_{C}^{2}) \\\\\n  X_{2} | (Y = H) & \\sim & N(\\mu_{H}, \\sigma_{H}^{2}) \\\\\n\\end{array}$$\n\n\n::: {.cell hash='16_naive_bayes_cache/html/unnamed-chunk-18_ddacdccdf028941d25199b35f6dedf53'}\n\n```{.r .cell-code}\n# Calculate sample mean and sd for each Y group\npulse_df |>\n  group_by(education) |>\n  summarize(mean = mean(age, na.rm = TRUE), \n            sd = sd(age, na.rm = TRUE))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 3 × 3\n  education        mean    sd\n  <fct>           <dbl> <dbl>\n1 Graduate degree  51.3  15.3\n2 College degree   49.0  16.1\n3 High school      50.2  17.2\n```\n:::\n:::\n\n\n## Priors\n\n::::: {.panel-tabset}\n\n## Plot\n\n\n::: {.cell hash='16_naive_bayes_cache/html/unnamed-chunk-19_b5a0700b965b634d819069ef550793e1'}\n::: {.cell-output-display}\n![](16_naive_bayes_files/figure-html/unnamed-chunk-19-1.png){width=672}\n:::\n:::\n\n\n## Code\n\n\n::: {.cell hash='16_naive_bayes_cache/html/unnamed-chunk-20_33fd55fff1f40843df267ba14f05ccd0'}\n\n```{.r .cell-code}\npulse_df |>\n  ggplot(aes(x = age, color = education)) + \n  stat_function(fun = dnorm, args = list(mean = 51.34975, sd = 15.27409), \n                aes(color = \"Graduate degree\"), linewidth = 3) +\n  stat_function(fun = dnorm, args = list(mean = 50.17277, sd = 17.18495\t),\n                aes(color = \"High school\"), linewidth = 3) + \n  stat_function(fun = dnorm, args = list(mean = 48.98403, sd = 16.10412),\n                aes(color = \"College degree\"), linewidth = 3) +\n  geom_vline(xintercept = 25, linetype = \"dashed\") + \n  labs(title = \"<span style = 'color:#23B63C'>Prior Probabilities</span>\",\n       subtitle = \"conditionally normal\",\n       caption = \"R4DS Book Club\") +\n  scale_color_manual(values = c(ghostbusters_green, ghostbusters_red , ghostbusters_gray)) +\n  theme_minimal() +\n  theme(plot.title = element_markdown(face = \"bold\", size = 24),\n        plot.subtitle = element_markdown(size = 16))\n```\n:::\n\n\n:::::\n\n## Likelihoods\n\nComputing the likelihoods in `R`:\n\n\n::: {.cell hash='16_naive_bayes_cache/html/unnamed-chunk-21_9ada6d52650c164e44cbc235ea66ec98'}\n\n```{.r .cell-code}\n# L(y = G | x_2 = 25) = 0.0060\ndnorm(25, mean = 51.3, sd = 15.3)\n\n# L(y = C | x_2 = 25) = 0.0082\ndnorm(25, mean = 49.0, sd = 16.1)\n\n# L(y = H | x_2 = 25) = 0.0079\ndnorm(25, mean = 50.2, sd = 17.2)\n```\n:::\n\n\nTotal probability:\n\n$$f(x_{2} = 25) = \\frac{203}{707}\\cdot(0.0060) + \\frac{313}{707}\\cdot(0.0082) + \\frac{191}{707}\\cdot(0.0079) \\approx 0.0074$$\n\n## Bayes Rule\n\n$$\\begin{array}{rcccccl}\n  f(y = G | x_{2} = 25) & = & \\frac{f(y = G) \\cdot L(y = G | x_{2} = 25)}{f(x_{2} = 25)} = \\frac{\\frac{203}{707}\\cdot(0.0060)}{0.0074} & \\approx & 0.2328 \\\\\n  f(y = C | x_{2} = 25) & = & \\frac{f(y = C) \\cdot L(y = C | x_{2} = 25)}{f(x_{2} = 25)} = \\frac{\\frac{313}{707}\\cdot(0.0082)}{0.0074} & \\approx & 0.4906 \\\\\n  f(y = H | x_{2} = 25) & = & \\frac{f(y = H) \\cdot L(y = H | x_{2} = 25)}{f(x_{2} = 25)} = \\frac{\\frac{191}{707}\\cdot(0.0079)}{0.0074} & \\approx & 0.2884 \\\\\n\\end{array}$$\n\nThis model also places the most probability the the participant at the college degree education level.\n\n\n# Another Numerical Predictor\n\n::::: {.panel-tabset}\n\n## Plot\n\n\n::: {.cell hash='16_naive_bayes_cache/html/unnamed-chunk-22_47457dd799e456ee6fcd93f4a61ae391'}\n::: {.cell-output-display}\n![](16_naive_bayes_files/figure-html/unnamed-chunk-22-1.png){width=672}\n:::\n:::\n\n\n## Code\n\n\n::: {.cell hash='16_naive_bayes_cache/html/unnamed-chunk-23_6699ee52d72933f60fc391ae88bb579e'}\n\n```{.r .cell-code}\npulse_df |>\n  ggplot(aes(x = income, fill = education)) +\n  geom_density(alpha = 0.7) + \n  geom_vline(xintercept = 50, linetype = \"dashed\", linewidth = 3) + \n  labs(title = \"<span style = 'color:#AB9F8F'>For which education level is a<br>$50k income the most common?</span>\",\n       subtitle = \"one numerical predictor\",\n       caption = \"R4DS Book Club\") +\n  scale_fill_manual(values = c(ghostbusters_green, ghostbusters_red , ghostbusters_gray)) +\n  theme_minimal() +\n  theme(axis.text.y = element_blank(),\n        axis.ticks.y = element_blank(),\n        plot.title = element_markdown(face = \"bold\", size = 24),\n        plot.subtitle = element_markdown(size = 16))\n```\n:::\n\n\n:::::\n\n## Naivety\n\nThis is where one \"*naive*\" part of naive Bayes classification comes into play. The naive Bayes method typically assumes that any quantitative predictor, here $X_{3}$, is **continuous** and **conditionally normal**:\n\n$$\\begin{array}{rcl}\n  X_{3} | (Y = G) & \\sim & N(\\mu_{G}, \\sigma_{G}^{2}) \\\\\n  X_{3} | (Y = C) & \\sim & N(\\mu_{C}, \\sigma_{C}^{2}) \\\\\n  X_{3} | (Y = H) & \\sim & N(\\mu_{H}, \\sigma_{H}^{2}) \\\\\n\\end{array}$$\n\n\n::: {.cell hash='16_naive_bayes_cache/html/unnamed-chunk-24_a6a078feae68af5ed8d961f59ca2a9a6'}\n\n```{.r .cell-code}\n# Calculate sample mean and sd for each Y group\npulse_df |>\n  group_by(education) |>\n  summarize(mean = mean(income, na.rm = TRUE), \n            sd = sd(income, na.rm = TRUE))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 3 × 3\n  education        mean    sd\n  <fct>           <dbl> <dbl>\n1 Graduate degree 114.   71.0\n2 College degree  102.   59.7\n3 High school      63.9  35.5\n```\n:::\n:::\n\n\n## Priors\n\n::::: {.panel-tabset}\n\n## Plot\n\n\n::: {.cell hash='16_naive_bayes_cache/html/unnamed-chunk-25_324eeb98cf6b87d06b3fa7255230deb5'}\n::: {.cell-output-display}\n![](16_naive_bayes_files/figure-html/unnamed-chunk-25-1.png){width=672}\n:::\n:::\n\n\n## Code\n\n\n::: {.cell hash='16_naive_bayes_cache/html/unnamed-chunk-26_ff67f96cc9eb93995b9cda8688da38b2'}\n\n```{.r .cell-code}\npulse_df |>\n  ggplot(aes(x = income, color = education)) + \n  stat_function(fun = dnorm, args = list(mean = 114, sd = 71), \n                aes(color = \"Graduate degree\"), linewidth = 3) +\n  stat_function(fun = dnorm, args = list(mean = 102, sd = 59.7),\n                aes(color = \"College degree\"), linewidth = 3) +\n  stat_function(fun = dnorm, args = list(mean = 63.9, sd = 35.5),\n                aes(color = \"High school\"), linewidth = 3) + \n  geom_vline(xintercept = 50, linetype = \"dashed\", linewidth = 2) + \n  labs(title = \"<span style = 'color:#AB9F8F'>Prior Probabilities</span>\",\n       subtitle = \"conditionally normal\",\n       caption = \"R4DS Book Club\") +\n  scale_color_manual(values = c(ghostbusters_green, ghostbusters_red , ghostbusters_gray)) +\n  theme_minimal() +\n  theme(plot.title = element_markdown(face = \"bold\", size = 24),\n        plot.subtitle = element_markdown(size = 16))\n```\n:::\n\n\n:::::\n\n## Likelihoods\n\nComputing the likelihoods in `R`:\n\n\n::: {.cell hash='16_naive_bayes_cache/html/unnamed-chunk-27_db3737af2afe4bc7c12bc5ac65c8de0f'}\n\n```{.r .cell-code}\n# L(y = G | x_3 = 50) = 0.0037\ndnorm(50, mean = 114, sd = 71)\n\n# L(y = C | x_3 = 50) = 0.0046\ndnorm(50, mean = 102, sd = 59.7)\n\n# L(y = H | x_3 = 50) = 0.0104\ndnorm(50, mean = 63.9, sd = 35.5)\n```\n:::\n\n\nTotal probability:\n\n$$f(x_{3} = 50) = \\frac{203}{707}\\cdot(0.0037) + \\frac{313}{707}\\cdot(0.0046) + \\frac{191}{707}\\cdot(0.0104) \\approx 0.0059$$\n\n## Bayes Rule\n\n$$\\begin{array}{rcccccl}\n  f(y = G | x_{3} = 50) & = & \\frac{f(y = G) \\cdot L(y = G | x_{3} = 50)}{f(x_{3} = 50)} = \\frac{\\frac{203}{707}\\cdot(0.0037)}{0.0059} & \\approx & 0.1801 \\\\\n  f(y = C | x_{3} = 50) & = & \\frac{f(y = C) \\cdot L(y = C | x_{3} = 50)}{f(x_{3} = 50)} = \\frac{\\frac{313}{707}\\cdot(0.0046)}{0.0059} & \\approx & 0.3452 \\\\\n  f(y = H | x_{3} = 50) & = & \\frac{f(y = H) \\cdot L(y = H | x_{3} = 50)}{f(x_{3} = 50)} = \\frac{\\frac{191}{707}\\cdot(0.0104)}{0.0059} & \\approx & 0.4762 \\\\\n\\end{array}$$\n\nThis model places the most probability the the participant at the high school education level.\n\n\n# Another Categorical Predictor\n\nSuppose that a researcher encounters a participant who believes that it is *likely* that their job will be replaced by robots over the next 10 years..  Our goal is to help this researcher guess the educational attainment of the participant: high school, college degree, or graduate degree.\n\n::::: {.panel-tabset}\n\n## Plot\n\n\n::: {.cell hash='16_naive_bayes_cache/html/unnamed-chunk-28_680a3f4a761b7f627695ff3521579983'}\n::: {.cell-output-display}\n![](16_naive_bayes_files/figure-html/unnamed-chunk-28-1.png){width=672}\n:::\n:::\n\n\n## Code\n\n\n::: {.cell hash='16_naive_bayes_cache/html/unnamed-chunk-29_3c719b2a9c0b40b40b8d1401f131625e'}\n\n```{.r .cell-code}\npulse_df |>\n  ggplot(aes(x = education, fill = robots)) +\n  geom_bar(position = \"fill\") +\n   labs(title = \"<span style = 'color:#AB9F8F'>For which education level is a<br>belief in robot takeover most likely?</span>\",\n       subtitle = \"(focus on the <span style = 'color:#23B63C'>likely</span> category)\",\n       caption = \"SML 320\",\n       x = \"education\",\n       y = \"proportion\") +\n  scale_fill_manual(values = c(\"#23B63C\", \"#EA0000\")) +\n  theme_minimal() +\n  theme(plot.title = element_markdown(face = \"bold\", size = 24),\n        plot.subtitle = element_markdown(size = 16))\n```\n:::\n\n\n:::::\n\n## Likelihoods\n\n\n::: {.cell hash='16_naive_bayes_cache/html/unnamed-chunk-30_f459631bffc36bb47a2d2f99f950a325'}\n\n```{.r .cell-code}\npulse_df |>\n  janitor::tabyl(education, robots) |>\n  janitor::adorn_totals(c(\"row\", \"col\"))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n       education Likely Unlikely Total\n Graduate degree     26      177   203\n  College degree     45      268   313\n     High school     69      122   191\n           Total    140      567   707\n```\n:::\n:::\n\n\n$$\\begin{array}{rcccl}\n  L(y = G | x_{4} = 1) & = & \\frac{26}{203} & \\approx & 0.1281 \\\\\n  L(y = C | x_{4} = 1) & = & \\frac{45}{313} & \\approx & 0.1438 \\\\\n  L(y = H | x_{4} = 1) & = & \\frac{69}{191} & \\approx & 0.3089 \\\\\n\\end{array}$$\n\nTotal probability:\n\n$$f(x_{4} = 1) = \\frac{203}{707}\\cdot\\frac{26}{203} + \\frac{313}{707}\\cdot\\frac{45}{313} + \\frac{191}{707}\\cdot\\frac{69}{191} = \\frac{143}{707}$$\n\n## Bayes Rule\n\n$$\\begin{array}{rcccccl}\n  f(y = G | x_{4} = 1) & = & \\frac{f(y = G) \\cdot L(y = G | x_{4} = 1)}{f(x_{4} = 1)} = \\frac{\\frac{203}{707}\\cdot\\frac{26}{203}}{\\frac{143}{707}} & \\approx & 0.1818 \\\\\n  f(y = C | x_{4} = 1) & = & \\frac{f(y = C) \\cdot L(y = C | x_{4} = 1)}{f(x_{4} = 1)} = \\frac{\\frac{313}{707}\\cdot\\frac{45}{313}}{\\frac{143}{707}} & \\approx & 0.3147 \\\\\n  f(y = H | x_{4} = 1) & = & \\frac{f(y = H) \\cdot L(y = H | x_{4} = 1)}{f(x_{4} = 1)} = \\frac{\\frac{191}{707}\\cdot\\frac{69}{191}}{\\frac{143}{707}} & \\approx & 0.4825 \\\\\n\\end{array}$$\n\nThis model places the most probability the the participant at the high school education level.\n\n\n# Two Numerical Predictors\n\n::::: {.panel-tabset}\n\n## Plot\n\n\n::: {.cell hash='16_naive_bayes_cache/html/unnamed-chunk-31_c1e3a8f32341c58e8faefb9e6e6f57c1'}\n::: {.cell-output-display}\n![](16_naive_bayes_files/figure-html/unnamed-chunk-31-1.png){width=672}\n:::\n:::\n\n\n## Code\n\n\n::: {.cell hash='16_naive_bayes_cache/html/unnamed-chunk-32_d851da3ec8cf9f0153958b444e5be1f3'}\n\n```{.r .cell-code}\npulse_df |>\nggplot(aes(x = age, y = income, \n           color = education)) + \n  geom_point(size = 3) + \n  geom_segment(aes(x = 25, y = 0, xend = 25, yend = 50),\n               color = \"black\", linetype = 2, linewidth = 2) +\n  geom_segment(aes(x = 0, y = 50, xend = 25, yend = 50),\n               color = \"black\", linetype = 2, linewidth = 2) +\n  labs(title = \"<span style = 'color:#AB9F8F'>Two Predictor Variables</span>\",\n       subtitle = \"25-year-old with $50k salary\",\n       caption = \"R4DS Book Club\") +\n  scale_color_manual(values = c(ghostbusters_green, ghostbusters_red , ghostbusters_gray)) +\n  theme_minimal() +\n  theme(plot.title = element_markdown(face = \"bold\", size = 24),\n        plot.subtitle = element_markdown(size = 16))\n```\n:::\n\n\n:::::\n\n## Generalizing Bayes' Rule:\n\n$$f(y | x_{2}, x_{3}) = \\frac{f(y) \\cdot L(y | x_{2}, x_{3})}{\\sum_{y'} f(y') \\cdot L(y' | x_{2}, x_{3})}$$\n\nAnother \"naive\" assumption of **conditionally independent**:\n\n$$L(y | x_{2}, x_{3}) = f(x_{2}, x_{3} | y) = f(x_{2} | y) \\cdot f(x_{3} | y)$$\n\n-   mathematically efficient\n-   but what about correlation?\n\n## Likelihoods\n\n:::: {.columns}\n\n::: {.column width=\"45%\"}\n\n::: {.cell hash='16_naive_bayes_cache/html/unnamed-chunk-33_721f4feb22517c4de3614dc8c02999cd'}\n\n```{.r .cell-code}\n# L(y = G | x_2 = 25) = 0.0060\ndnorm(25, mean = 51.3, sd = 15.3)\n\n# L(y = C | x_2 = 25) = 0.0082\ndnorm(25, mean = 49.0, sd = 16.1)\n\n# L(y = H | x_2 = 25) = 0.0079\ndnorm(25, mean = 50.2, sd = 17.2)\n```\n:::\n\n:::\n\n::: {.column width=\"10%\"}\n\n:::\n\n::: {.column width=\"45%\"}\n\n::: {.cell hash='16_naive_bayes_cache/html/unnamed-chunk-34_b127cbd33a0e27870f04319623932102'}\n\n```{.r .cell-code}\n# L(y = G | x_3 = 50) = 0.0037\ndnorm(50, mean = 114, sd = 71)\n\n# L(y = C | x_3 = 50) = 0.0046\ndnorm(50, mean = 102, sd = 59.7)\n\n# L(y = H | x_3 = 50) = 0.0104\ndnorm(50, mean = 63.9, sd = 35.5)\n```\n:::\n\n:::\n\n::::\n\n$$f(x_2 = 50, x_{3} = 50) = \\frac{203}{707}\\cdot(0.0060)(0.0037) + \\frac{313}{707}\\cdot(0.0082)(0.0046) + \\frac{191}{707}\\cdot(0.0079)(0.0104) \\approx 0.00004527$$\n\n## Bayes Rule\n\n$$\\begin{array}{rcccccl}\n  f(y = G | x_2 = 50, x_{3} = 50) & = & \\frac{f(y = G) \\cdot L(y = G | x_2 = 50, x_{3} = 50)}{f(x_2 = 50, x_{3} = 50)} = \\frac{\\frac{203}{707}\\cdot(0.0060)(0.0037)}{0.00004527} & \\approx & 0.1398 \\\\\n  f(y = C | x_2 = 50, x_{3} = 50) & = & \\frac{f(y = C) \\cdot L(y = C | x_2 = 50, x_{3} = 50)}{f(x_2 = 50, x_{3} = 50)} = \\frac{\\frac{313}{707}\\cdot(0.0082)(0.0046)}{0.00004527} & \\approx & 0.3660 \\\\\n  f(y = H | x_2 = 50, x_{3} = 50) & = & \\frac{f(y = H) \\cdot L(y = H | x_2 = 50, x_{3} = 50)}{f(x_2 = 50, x_{3} = 50)} = \\frac{\\frac{191}{707}\\cdot(0.0079)(0.0104)}{0.00004527} & \\approx & 0.4942 \\\\\n\\end{array}$$\n\nThis model places the most probability the the participant at the high school education level.\n\n\n\n\n\n\n\n\n# Predictions\n\n::::: {.panel-tabset}\n\n## Model 1\n\n\n::: {.cell hash='16_naive_bayes_cache/html/unnamed-chunk-35_fa37d43e113967c6bb401ba7fcf7d290'}\n\n```{.r .cell-code}\nnaive_model_1 <- e1071::naiveBayes(education ~ ghosts, data = pulse_df)\n```\n:::\n\n::: {.cell hash='16_naive_bayes_cache/html/unnamed-chunk-36_fcda56b18a65556ce44a8e1bd2464e8c'}\n\n```{.r .cell-code}\npredict(naive_model_1, \n        newdata = data.frame(ghosts = \"Yes\"), \n        type = \"raw\") |> round(digits = 4)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n     Graduate degree College degree High school\n[1,]          0.2283         0.4409      0.3307\n```\n:::\n:::\n\n::: {.cell hash='16_naive_bayes_cache/html/unnamed-chunk-37_75df495d26fdf33e99eb061f107b9b2e'}\n\n```{.r .cell-code}\npredict(naive_model_1, \n        newdata = data.frame(ghosts = \"Yes\"))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] College degree\nLevels: Graduate degree College degree High school\n```\n:::\n:::\n\n\n## Model 2\n\n\n::: {.cell hash='16_naive_bayes_cache/html/unnamed-chunk-38_2d5482f16bb65a45d23ccfbf3d700217'}\n\n```{.r .cell-code}\nnaive_model_2 <- e1071::naiveBayes(education ~ age, data = pulse_df)\n```\n:::\n\n::: {.cell hash='16_naive_bayes_cache/html/unnamed-chunk-39_3010340aa821a5540098276c9015dd17'}\n\n```{.r .cell-code}\npredict(naive_model_2, \n        newdata = data.frame(age = 25), \n        type = \"raw\") |> round(digits = 4)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n     Graduate degree College degree High school\n[1,]          0.2271         0.4852      0.2877\n```\n:::\n:::\n\n::: {.cell hash='16_naive_bayes_cache/html/unnamed-chunk-40_625941598472cbb5a81084ea1a3b180d'}\n\n```{.r .cell-code}\npredict(naive_model_2, \n        newdata = data.frame(age = 25))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] College degree\nLevels: Graduate degree College degree High school\n```\n:::\n:::\n\n\n## Model 3\n\n\n::: {.cell hash='16_naive_bayes_cache/html/unnamed-chunk-41_f78579f392e0a32d632790216dfe4a21'}\n\n```{.r .cell-code}\nnaive_model_3 <- e1071::naiveBayes(education ~ income, data = pulse_df)\n```\n:::\n\n::: {.cell hash='16_naive_bayes_cache/html/unnamed-chunk-42_3c5cf64cfe670d0204effdf5f13bb773'}\n\n```{.r .cell-code}\npredict(naive_model_3, \n        newdata = data.frame(income = 50), \n        type = \"raw\") |> round(digits = 4)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n     Graduate degree College degree High school\n[1,]          0.1813         0.3426      0.4761\n```\n:::\n:::\n\n::: {.cell hash='16_naive_bayes_cache/html/unnamed-chunk-43_f9e3e84a01c2bba804579b63f955ae3c'}\n\n```{.r .cell-code}\npredict(naive_model_3, \n        newdata = data.frame(income = 50))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] High school\nLevels: Graduate degree College degree High school\n```\n:::\n:::\n\n\n## Model 4\n\n\n::: {.cell hash='16_naive_bayes_cache/html/unnamed-chunk-44_80f81a6ec3a9437bb12e3ebfda5cc171'}\n\n```{.r .cell-code}\nnaive_model_4 <- e1071::naiveBayes(education ~ robots, data = pulse_df)\n```\n:::\n\n::: {.cell hash='16_naive_bayes_cache/html/unnamed-chunk-45_be7d51a87feb9bb200c05f4e65409adc'}\n\n```{.r .cell-code}\npredict(naive_model_4, \n        newdata = data.frame(robots = \"Likely\"), \n        type = \"raw\") |> round(digits = 4)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n     Graduate degree College degree High school\n[1,]          0.1857         0.3214      0.4929\n```\n:::\n:::\n\n::: {.cell hash='16_naive_bayes_cache/html/unnamed-chunk-46_fb851efc0a0cd172663f1d9afa74c935'}\n\n```{.r .cell-code}\npredict(naive_model_4, \n        newdata = data.frame(robots = \"Likely\"))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] High school\nLevels: Graduate degree College degree High school\n```\n:::\n:::\n\n\n## Model 5\n\n### Two Numerical Predictor Variables\n\n\n::: {.cell hash='16_naive_bayes_cache/html/unnamed-chunk-47_b7890d84c1841b86d302bd740904914e'}\n\n```{.r .cell-code}\nnaive_model_5 <- e1071::naiveBayes(education ~ age + income, \n                                   data = pulse_df)\n```\n:::\n\n::: {.cell hash='16_naive_bayes_cache/html/unnamed-chunk-48_177661b2dd1d0e0804e2f7641f685742'}\n\n```{.r .cell-code}\npredict(naive_model_5, \n        newdata = data.frame(age = 25, income = 50), \n        type = \"raw\") |> round(digits = 4)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n     Graduate degree College degree High school\n[1,]          0.1398          0.366      0.4942\n```\n:::\n:::\n\n::: {.cell hash='16_naive_bayes_cache/html/unnamed-chunk-49_bf3e0171a81a09f9be902be76a2e8ae3'}\n\n```{.r .cell-code}\npredict(naive_model_5, \n        newdata = data.frame(age = 25, income = 50))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] High school\nLevels: Graduate degree College degree High school\n```\n:::\n:::\n\n\n## Model 6\n\n### Extended Model with all 4 Predictor Variables\n\n\n::: {.cell hash='16_naive_bayes_cache/html/unnamed-chunk-50_889da840499ccf7e81fa114e7f1f3a60'}\n\n```{.r .cell-code}\nnaive_model_6 <- e1071::naiveBayes(education ~ \n                                     ghosts + age + income + robots, \n                                   data = pulse_df)\n```\n:::\n\n::: {.cell hash='16_naive_bayes_cache/html/unnamed-chunk-51_61451a675d3ca55603394a66b6243daf'}\n\n```{.r .cell-code}\npredict(naive_model_6, \n        newdata = data.frame(ghosts = \"Yes\", \n                             age = 25, \n                             income = 50,\n                             robots = \"Likely\"), \n        type = \"raw\") |> round(digits = 4)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n     Graduate degree College degree High school\n[1,]          0.0499         0.1837      0.7663\n```\n:::\n:::\n\n::: {.cell hash='16_naive_bayes_cache/html/unnamed-chunk-52_d783ab67c008e2199a360403b68b5083'}\n\n```{.r .cell-code}\npredict(naive_model_6, \n        newdata = data.frame(ghosts = \"Yes\", \n                             age = 25, \n                             income = 50,\n                             robots = \"Likely\"))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] High school\nLevels: Graduate degree College degree High school\n```\n:::\n:::\n\n\n:::::\n\n\n# Confusion\n\n## Cross-Validation\n\n\n::: {.cell hash='16_naive_bayes_cache/html/unnamed-chunk-53_d63b0a1216927e56a84b541f2d3a316b'}\n\n```{.r .cell-code}\nset.seed(320)\nnaive_model_1_cv <- bayesrules::naive_classification_summary_cv(\n  model = naive_model_1, data = pulse_df, y = \"education\", k = 10)\n\nnaive_model_2_cv <- bayesrules::naive_classification_summary_cv(\n  model = naive_model_2, data = pulse_df, y = \"education\", k = 10)\n\nnaive_model_3_cv <- bayesrules::naive_classification_summary_cv(\n  model = naive_model_3, data = pulse_df, y = \"education\", k = 10)\n\nnaive_model_4_cv <- bayesrules::naive_classification_summary_cv(\n  model = naive_model_4, data = pulse_df, y = \"education\", k = 10)\n\nnaive_model_5_cv <- bayesrules::naive_classification_summary_cv(\n  model = naive_model_5, data = pulse_df, y = \"education\", k = 10)\n\nnaive_model_6_cv <- bayesrules::naive_classification_summary_cv(\n  model = naive_model_6, data = pulse_df, y = \"education\", k = 10)\n```\n:::\n\n\n::: {.callout-note collapse=\"true\"}\n## Accuracy of a Confusion Matrix\n\n\n::: {.cell hash='16_naive_bayes_cache/html/unnamed-chunk-54_a62e9730bbb369c72fed5d7738a4fb59'}\n\n```{.r .cell-code}\nConfusion_Accuracy <- function(conf_mat){\n  # This function will compute the accuracy of a confusion matrix\n  \n  m <- nrow(conf_mat)\n  numbers_list <- stringr::str_extract_all(unlist(conf_mat), \n                                              \"\\\\([0-9]+\\\\)\")\n  numbers_string <- paste(unlist(numbers_list))\n  numbers_string <- stringr::str_replace_all(numbers_string, \"\\\\(\", \"\")\n  numbers_string <- stringr::str_replace_all(numbers_string, \"\\\\)\", \"\")\n  numbers <- as.numeric(numbers_string)\n  M <- matrix(numbers, nrow = m, ncol = m)\n  \n  # return\n  sum(diag(M)) / sum(M)\n}\n```\n:::\n\n:::\n\n::::: {.panel-tabset}\n\n## Model 1\n\n\n::: {.cell hash='16_naive_bayes_cache/html/unnamed-chunk-55_4adc2ab7308fa6ca2729575e1db59e02'}\n\n```{.r .cell-code}\nnaive_model_1_cv$cv\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n       education Graduate degree College degree High school\n Graduate degree       0.00% (0)  100.00% (203)   0.00% (0)\n  College degree       0.00% (0)  100.00% (313)   0.00% (0)\n     High school       0.00% (0)  100.00% (191)   0.00% (0)\n```\n:::\n:::\n\n::: {.cell hash='16_naive_bayes_cache/html/unnamed-chunk-56_7935d8b4d2b85ff7c0a45e15b4d872e9'}\n\n```{.r .cell-code}\nConfusion_Accuracy(naive_model_1_cv$cv)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 0.4427157\n```\n:::\n:::\n\n\n## Model 2\n\n\n::: {.cell hash='16_naive_bayes_cache/html/unnamed-chunk-57_3a2a04388ee39476414f28e66f11c73f'}\n\n```{.r .cell-code}\nnaive_model_2_cv$cv\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n       education Graduate degree College degree High school\n Graduate degree       0.00% (0)   99.01% (201)   0.99% (2)\n  College degree       0.00% (0)   98.40% (308)   1.60% (5)\n     High school       0.00% (0)   99.48% (190)   0.52% (1)\n```\n:::\n:::\n\n::: {.cell hash='16_naive_bayes_cache/html/unnamed-chunk-58_51b1b2484b9c7f316c027186cca6288b'}\n\n```{.r .cell-code}\nConfusion_Accuracy(naive_model_2_cv$cv)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 0.437058\n```\n:::\n:::\n\n\n## Model 3\n\n\n::: {.cell hash='16_naive_bayes_cache/html/unnamed-chunk-59_a7dabde3b712ce1259b460c9957e246d'}\n\n```{.r .cell-code}\nnaive_model_3_cv$cv\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n       education Graduate degree College degree  High school\n Graduate degree      6.40% (13)   65.02% (132) 28.57%  (58)\n  College degree      3.19% (10)   57.83% (181) 38.98% (122)\n     High school      0.00%  (0)   30.89%  (59) 69.11% (132)\n```\n:::\n:::\n\n::: {.cell hash='16_naive_bayes_cache/html/unnamed-chunk-60_5a608f58cee9784cbc07c21e76c83910'}\n\n```{.r .cell-code}\nConfusion_Accuracy(naive_model_3_cv$cv)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 0.4611033\n```\n:::\n:::\n\n\n## Model 4\n\n\n::: {.cell hash='16_naive_bayes_cache/html/unnamed-chunk-61_dde4db15f0afdf6fa3710662e1707b9a'}\n\n```{.r .cell-code}\nnaive_model_4_cv$cv\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n       education Graduate degree College degree High school\n Graduate degree       0.00% (0)   87.19% (177) 12.81% (26)\n  College degree       0.00% (0)   85.62% (268) 14.38% (45)\n     High school       0.00% (0)   63.87% (122) 36.13% (69)\n```\n:::\n:::\n\n::: {.cell hash='16_naive_bayes_cache/html/unnamed-chunk-62_3b03dbd8b8ccb150161c8a7488dfc513'}\n\n```{.r .cell-code}\nConfusion_Accuracy(naive_model_4_cv$cv)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 0.476662\n```\n:::\n:::\n\n\n## Model 5\n\n\n::: {.cell hash='16_naive_bayes_cache/html/unnamed-chunk-63_273bedb34adcdb87dee80a08b5da4a3f'}\n\n```{.r .cell-code}\nnaive_model_5_cv$cv\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n       education Graduate degree College degree  High school\n Graduate degree      5.42% (11)   66.50% (135) 28.08%  (57)\n  College degree      4.15% (13)   58.47% (183) 37.38% (117)\n     High school      0.00%  (0)   32.98%  (63) 67.02% (128)\n```\n:::\n:::\n\n::: {.cell hash='16_naive_bayes_cache/html/unnamed-chunk-64_9dd86dcba05a0cd8f35889bbdfe9f354'}\n\n```{.r .cell-code}\nConfusion_Accuracy(naive_model_5_cv$cv)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 0.4554455\n```\n:::\n:::\n\n\n## Model 6\n\n\n::: {.cell hash='16_naive_bayes_cache/html/unnamed-chunk-65_4c62e00a6eb57ff4e09b7b35f8e9af17'}\n\n```{.r .cell-code}\nnaive_model_6_cv$cv\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n       education Graduate degree College degree  High school\n Graduate degree      7.39% (15)   78.33% (159) 14.29%  (29)\n  College degree      5.75% (18)   69.97% (219) 24.28%  (76)\n     High school      0.52%  (1)   45.55%  (87) 53.93% (103)\n```\n:::\n:::\n\n::: {.cell hash='16_naive_bayes_cache/html/unnamed-chunk-66_184da537c407c1263ab26760efb9ce12'}\n\n```{.r .cell-code}\nConfusion_Accuracy(naive_model_6_cv$cv)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 0.476662\n```\n:::\n:::\n\n\n:::::\n\n## Model Selection\n\n\n::: {.cell hash='16_naive_bayes_cache/html/unnamed-chunk-67_c92dd47053a8055ce61ec475d3937d9c'}\n::: {.cell-output-display}\n```{=html}\n<div id=\"hqpjywcklw\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#hqpjywcklw table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#hqpjywcklw thead, #hqpjywcklw tbody, #hqpjywcklw tfoot, #hqpjywcklw tr, #hqpjywcklw td, #hqpjywcklw th {\n  border-style: none;\n}\n\n#hqpjywcklw p {\n  margin: 0;\n  padding: 0;\n}\n\n#hqpjywcklw .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#hqpjywcklw .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#hqpjywcklw .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#hqpjywcklw .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#hqpjywcklw .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#hqpjywcklw .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#hqpjywcklw .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#hqpjywcklw .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#hqpjywcklw .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#hqpjywcklw .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#hqpjywcklw .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#hqpjywcklw .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#hqpjywcklw .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#hqpjywcklw .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#hqpjywcklw .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#hqpjywcklw .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#hqpjywcklw .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#hqpjywcklw .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#hqpjywcklw .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#hqpjywcklw .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#hqpjywcklw .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#hqpjywcklw .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#hqpjywcklw .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#hqpjywcklw .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#hqpjywcklw .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#hqpjywcklw .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#hqpjywcklw .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#hqpjywcklw .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#hqpjywcklw .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#hqpjywcklw .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#hqpjywcklw .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#hqpjywcklw .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#hqpjywcklw .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#hqpjywcklw .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#hqpjywcklw .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#hqpjywcklw .gt_left {\n  text-align: left;\n}\n\n#hqpjywcklw .gt_center {\n  text-align: center;\n}\n\n#hqpjywcklw .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#hqpjywcklw .gt_font_normal {\n  font-weight: normal;\n}\n\n#hqpjywcklw .gt_font_bold {\n  font-weight: bold;\n}\n\n#hqpjywcklw .gt_font_italic {\n  font-style: italic;\n}\n\n#hqpjywcklw .gt_super {\n  font-size: 65%;\n}\n\n#hqpjywcklw .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#hqpjywcklw .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#hqpjywcklw .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#hqpjywcklw .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#hqpjywcklw .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#hqpjywcklw .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#hqpjywcklw .gt_indent_5 {\n  text-indent: 25px;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_heading\">\n      <td colspan=\"2\" class=\"gt_heading gt_title gt_font_normal\" style><strong>Naive Bayes on Pulse Survey Data</strong></td>\n    </tr>\n    <tr class=\"gt_heading\">\n      <td colspan=\"2\" class=\"gt_heading gt_subtitle gt_font_normal gt_bottom_border\" style>Cross validation metrics</td>\n    </tr>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"model\">model</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Accuracy\">Accuracy</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"model\" class=\"gt_row gt_center\" style=\"background-color: #ADD8E6;\">1</td>\n<td headers=\"Accuracy\" class=\"gt_row gt_center\">0.442716</td></tr>\n    <tr><td headers=\"model\" class=\"gt_row gt_center\" style=\"background-color: #ADD8E6;\">2</td>\n<td headers=\"Accuracy\" class=\"gt_row gt_center\">0.437058</td></tr>\n    <tr><td headers=\"model\" class=\"gt_row gt_center\" style=\"background-color: #ADD8E6;\">3</td>\n<td headers=\"Accuracy\" class=\"gt_row gt_center\">0.461103</td></tr>\n    <tr><td headers=\"model\" class=\"gt_row gt_center\" style=\"background-color: #ADD8E6; font-weight: bold;\">4</td>\n<td headers=\"Accuracy\" class=\"gt_row gt_center\" style=\"background-color: #FFFF00; font-weight: bold;\">0.476662</td></tr>\n    <tr><td headers=\"model\" class=\"gt_row gt_center\" style=\"background-color: #ADD8E6;\">5</td>\n<td headers=\"Accuracy\" class=\"gt_row gt_center\">0.455446</td></tr>\n    <tr><td headers=\"model\" class=\"gt_row gt_center\" style=\"background-color: #ADD8E6; font-weight: bold;\">6</td>\n<td headers=\"Accuracy\" class=\"gt_row gt_center\" style=\"background-color: #FFFF00; font-weight: bold;\">0.476662</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n:::\n:::\n\n\n\n# Return of the Best Model\n\n::::: {.panel-tabset}\n\n## Plot\n\n\n::: {.cell hash='16_naive_bayes_cache/html/unnamed-chunk-68_4fee93e5b1ceb77e4e0b353219e925ec'}\n::: {.cell-output-display}\n![](16_naive_bayes_files/figure-html/unnamed-chunk-68-1.png){width=672}\n:::\n:::\n\n::: {.cell hash='16_naive_bayes_cache/html/unnamed-chunk-69_3ca7e46f1ed96181bcda64831456af5f'}\n\n```{.r .cell-code}\npulse_df |>\n  ggplot(aes(x = education, fill = robots)) +\n  geom_bar(position = \"fill\") +\n   labs(title = \"<span style = 'color:#AB9F8F'>For which education level is a<br>belief in robot takeover most likely?</span>\",\n       subtitle = \"(focus on the <span style = 'color:#23B63C'>likely</span> category)\",\n       caption = \"SML 320\",\n       x = \"education\",\n       y = \"proportion\") +\n  scale_fill_manual(values = c(\"#23B63C\", \"#EA0000\")) +\n  theme_minimal() +\n  theme(plot.title = element_markdown(face = \"bold\", size = 24),\n        plot.subtitle = element_markdown(size = 16))\n```\n:::\n\n\n## Posterior Distribution\n\n\n::: {.cell hash='16_naive_bayes_cache/html/unnamed-chunk-70_66d72edc03355b20faacb1174934433b'}\n::: {.cell-output-display}\n![](16_naive_bayes_files/figure-html/unnamed-chunk-70-1.png){width=672}\n:::\n:::\n\n::: {.cell hash='16_naive_bayes_cache/html/unnamed-chunk-71_34734d95df318c127e6daad3fe6b816f'}\n\n```{.r .cell-code}\nedu_levels <- c(\"Graduate degree\",\n                \"College degree\",\n                \"High school\")\npreds <- predict(naive_model_4, \n                 newdata = data.frame(robots = \"Likely\"), \n                 type = \"raw\")\nprobs <- as.numeric(paste(preds))\n\ndf_for_post_plot <- data.frame(edu_levels, probs)\n\ndf_for_post_plot |>\n  ggplot(aes(x = edu_levels, y = probs, fill = edu_levels)) +\n  geom_bar(stat = \"identity\") + \n  labs(title = \"Posterior Distribution of Education Level\",\n       subtitle = \"Model 4: 'Do you believe that robots will replace your job over the next ten years?'\",\n       caption = \"SML 320\",\n       x = \"education level\",\n       y = \"probability\") +\n  scale_fill_manual(values = c(ghostbusters_green, ghostbusters_red , ghostbusters_gray)) +\n  theme_minimal() +\n  theme(legend.position = \"none\")\n```\n:::\n\n\n:::::\n\n# Summary\n\nNaive Bayes\n\n$$f(y | x_{1}, x_{2}, ..., x_{p}) = \\frac{f(y) \\cdot L(y | x_{1}, x_{2}, ..., x_{p})}{\\sum_{y'} f(y') \\cdot L(y' | x_{1}, x_{2}, ..., x_{p})}$$\n\n-   conditionally independent $\\rightarrow$ computationally efficient\n-   generalizes to more than two categories\n-   assumptions violated commonly in practice\n\nLogistic Regression\n\n$$\\log\\left(\\frac{\\pi}{1-\\pi}\\right) = \\beta_{0} + \\beta_{1}X_{1} + \\cdots + \\beta_{k}X_{p}$$\n\n-   binary classification\n-   coefficients $\\rightarrow$ illumination of the relationships among these variables\n\n\n\n# Footnotes\n\n* \n\n::: {.callout-note collapse=\"true\"}\n## Session Info\n\n\n::: {.cell hash='16_naive_bayes_cache/html/unnamed-chunk-72_ee58322e2280fd66c46a457901007003'}\n\n```{.r .cell-code}\nsessionInfo()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nR version 4.3.2 (2023-10-31 ucrt)\nPlatform: x86_64-w64-mingw32/x64 (64-bit)\nRunning under: Windows 10 x64 (build 19045)\n\nMatrix products: default\n\n\nlocale:\n[1] LC_COLLATE=English_United States.utf8 \n[2] LC_CTYPE=English_United States.utf8   \n[3] LC_MONETARY=English_United States.utf8\n[4] LC_NUMERIC=C                          \n[5] LC_TIME=English_United States.utf8    \n\ntime zone: America/New_York\ntzcode source: internal\n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] e1071_1.7-13       lubridate_1.9.3    forcats_1.0.0      stringr_1.5.1     \n [5] dplyr_1.1.4        purrr_1.0.2        readr_2.1.5        tidyr_1.3.1       \n [9] tibble_3.2.1       ggplot2_3.4.3      tidyverse_2.0.0    rstanarm_2.21.4   \n[13] Rcpp_1.0.11        rstan_2.32.5       StanHeaders_2.32.5 janitor_2.2.0     \n[17] gt_0.9.0           ggtext_0.1.2       bayesplot_1.10.0   bayesrules_0.0.2  \n\nloaded via a namespace (and not attached):\n [1] gridExtra_2.3      inline_0.3.19      rlang_1.1.1        magrittr_2.0.3    \n [5] snakecase_0.11.0   matrixStats_1.0.0  compiler_4.3.2     loo_2.6.0         \n [9] callr_3.7.3        vctrs_0.6.5        reshape2_1.4.4     pkgconfig_2.0.3   \n[13] crayon_1.5.2       fastmap_1.1.1      ellipsis_0.3.2     labeling_0.4.3    \n[17] utf8_1.2.4         threejs_0.3.3      promises_1.2.1     rmarkdown_2.24    \n[21] tzdb_0.4.0         markdown_1.8       ps_1.7.5           nloptr_2.0.3      \n[25] xfun_0.40          jsonlite_1.8.7     later_1.3.1        parallel_4.3.2    \n[29] prettyunits_1.2.0  R6_2.5.1           dygraphs_1.1.1.6   stringi_1.8.3     \n[33] boot_1.3-28.1      knitr_1.43         zoo_1.8-12         base64enc_0.1-3   \n[37] httpuv_1.6.11      Matrix_1.6-1.1     splines_4.3.2      igraph_1.4.3      \n[41] timechange_0.3.0   tidyselect_1.2.0   rstudioapi_0.15.0  yaml_2.3.8        \n[45] codetools_0.2-19   miniUI_0.1.1.1     curl_5.0.2         processx_3.8.1    \n[49] pkgbuild_1.4.0     lattice_0.21-9     plyr_1.8.8         withr_3.0.0       \n[53] shiny_1.7.5        groupdata2_2.0.2   evaluate_0.21      survival_3.5-7    \n[57] proxy_0.4-27       RcppParallel_5.1.7 xml2_1.3.6         xts_0.13.1        \n[61] pillar_1.9.0       DT_0.28            stats4_4.3.2       shinyjs_2.1.0     \n[65] generics_0.1.3     hms_1.1.3          rstantools_2.3.1   munsell_0.5.0     \n[69] scales_1.2.1       minqa_1.2.5        gtools_3.9.4       xtable_1.8-4      \n[73] class_7.3-22       glue_1.6.2         tools_4.3.2        shinystan_2.6.0   \n[77] lme4_1.1-33        colourpicker_1.2.0 grid_4.3.2         QuickJSR_1.1.3    \n[81] crosstalk_1.2.0    colorspace_2.1-0   nlme_3.1-163       cli_3.6.1         \n[85] fansi_1.0.6        V8_4.3.0           gtable_0.3.4       digest_0.6.33     \n[89] farver_2.1.1       htmlwidgets_1.6.2  htmltools_0.5.6    lifecycle_1.0.4   \n[93] mime_0.12          gridtext_0.1.5     shinythemes_1.2.0  MASS_7.3-60       \n```\n:::\n:::\n\n:::\n\n\n:::: {.columns}\n\n::: {.column width=\"45%\"}\n\t\n:::\n\n::: {.column width=\"10%\"}\n\n:::\n\n::: {.column width=\"45%\"}\n\n:::\n\n::::\n\n\n::::: {.panel-tabset}\n\n\n\n:::::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}