{
  "hash": "1b12908eda15b843cf42a2a87dcf248d",
  "result": {
    "markdown": "---\ntitle: \"3: Beta-Binomial Models\"\nauthor: \"you\"\ndate: \"2023-02-06\"\n# format: \n#   revealjs:\n#     scrollable: true\nformat: \n  html:\n    toc: true\n---\n\n\nToday, let's see if the following R code runs on your computer.\n\nRemember to install packages as needed.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(\"bayesrules\")\nlibrary(\"gt\")\nlibrary(\"janitor\")\nlibrary(\"patchwork\")\nlibrary(\"skimr\")\nlibrary(\"tidyverse\")\n```\n:::\n\n\nAlso, place the `tips.csv` file in the same directory as this script.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntips_df <- readr::read_csv(\"tips.csv\")\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nRows: 244 Columns: 7\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (4): sex, smoker, day, time\ndbl (3): total_bill, tip, size\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n:::\n:::\n\n\n\n# Scenario 1: Discrete Prior, Computer Simulation\n\n## Simulation Samples\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# define possible smoker proportions\nsmokers <- data.frame(pi = c(0.25, 0.50, 0.75))\n\n# define prior model\nprior <- c(1/3, 1/3, 1/3)\n\n# simulate 10000 values of pi from the prior\nset.seed(320)\nsmoker_sim <- sample_n(smokers, size = 10000, weight = prior, replace = TRUE)\n\n# simulate 10000 samples of customers\nsmoker_sim <- smoker_sim |>\n  mutate(y = rbinom(10000, size = 9, prob = pi))\n```\n:::\n\n\n## PMFs\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# plot y by pi\nggplot(smoker_sim, aes(x = y)) + \n  stat_count(aes(y = after_stat(prop))) + \n  facet_wrap(~ pi)\n```\n\n::: {.cell-output-display}\n![](03_beta_binomial_template_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\n## Posterior Distribution\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# focus on simulations with y = 4\nfour_smokers <- smoker_sim %>% \n  filter(y == 4)\n\n# summarize the posterior approximation\nfour_smokers %>% \n  tabyl(pi) %>% \n  adorn_totals(\"row\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n    pi    n   percent\n  0.25  408 0.3000000\n   0.5  813 0.5977941\n  0.75  139 0.1022059\n Total 1360 1.0000000\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# plot the posterior approximation\nggplot(four_smokers, aes(x = pi)) + \n  geom_bar()\n```\n\n::: {.cell-output-display}\n![](03_beta_binomial_template_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\n\n# Scenario 2: Continuous Prior, Computer Simulation\n\n## Table\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsummarize_beta_binomial(alpha = 4, beta = 5, y = 7, n = 25) |>\n  mutate_if(is.numeric, round, digits = 4)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n      model alpha beta   mean   mode    var     sd\n1     prior     4    5 0.4444 0.4286 0.0247 0.1571\n2 posterior    11   23 0.3235 0.3125 0.0063 0.0791\n```\n:::\n:::\n\n\n## Plot\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot_beta_binomial(alpha = 4, beta = 5, y = 7, n = 25) +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](03_beta_binomial_template_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::",
    "supporting": [
      "03_beta_binomial_template_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}